- nodeset:
    name: registry-centos-7
    nodes:
      - name: master
        label: dib-centos-7
    groups:
      - name: openshift
        nodes:
          - master
      - name: masters
        nodes:
          - master
      - name: nodes
        nodes:
          - master
      - name: etcd
        nodes:
          - master

- job:
    name: rdo-registry-integration-base
    parent: base
    description: |
      Base RDO OpenShift Registry integration job
    vars:
      openshift_node_labels:
        region: infra
        zone: default
      openshift_schedulable: true
    pre-run: .zuul.d/playbooks/registry-pre.yaml
    run: playbooks/rdo-registry.yml
    nodeset: registry-centos-7

- job:
    name: rdo-registry-integration
    parent: rdo-registry-integration-base
    description: |
      OpenShift Registry integration job
    run: .zuul.d/playbooks/registry-validate.yaml

- project:
    check:
      jobs:
        - rdo-registry-integration
    gate:
      jobs:
        - rdo-registry-integration
