---
#   Copyright Red Hat, Inc. All Rights Reserved.
#
#   Licensed under the Apache License, Version 2.0 (the "License"); you may
#   not use this file except in compliance with the License. You may obtain
#   a copy of the License at
#
#       http://www.apache.org/licenses/LICENSE-2.0
#
#   Unless required by applicable law or agreed to in writing, software
#   distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
#   WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
#   License for the specific language governing permissions and limitations
#   under the License.
#

# Variables for rdo-infra/sensu-client

rdo_nodepool_image_names:
  - rdo-centos-7
  - upstream-centos-7
  - rdo-fedora-26

rdo_additional_checks:
  check-nodepool-images: >
    {% set checks = {} -%}
    {% for image in rdo_nodepool_image_names -%}
      {% set _ = checks.update({ "check-nodepool-image-age-"Â ~ image: {
                  "command": "/opt/sensu/embedded/bin/check-nodepool-image-age.sh" ~ image ~ "2",
                  "subscribers": "managesf",
              }
          })
      -%}
    {% endfor -%}
    {{ checks }}
 check-nodepool:
   command: '/opt/sensu/embedded/bin/check-mtime.rb -f /var/log/nodepool/nodepool.log -w 1800 -c 3600 -z'
   subscribers: 'managesf'

rdo_subscriptions:
  - "default"
  - "managesf"

